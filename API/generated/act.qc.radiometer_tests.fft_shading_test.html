

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>act.qc.radiometer_tests.fft_shading_test &mdash; Atmospheric data Community Toolkit 0.6.4.post40+gf0ea82a documentation</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/plot_directive.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/copybutton.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/gallery.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/gallery-binder.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/gallery-dataframe.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/gallery-rendered-html.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/clipboard.min.js"></script>
        <script src="../../_static/copybutton.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="act.retrievals (act.retrievals)" href="../retrievals.html" />
    <link rel="prev" title="act.qc.qctests.QCTests" href="act.qc.qctests.QCTests.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> Atmospheric data Community Toolkit
          

          
          </a>

          
            
            
              <div class="version">
                0.6.4.post40+gf0ea82a
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Documentation</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../CREATING_ENVIRONMENTS.html">Setting up an Environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../CONTRIBUTING.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../usage.html">Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../source/auto_examples/index.html">ACT Example Gallery</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../release-history.html">Release History</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">API Reference</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../corrections.html">act.corrections (act.corrections)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../discovery.html">act.discovery (act.discovery)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../io.html">act.io (act.io)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../plotting.html">act.plotting (act.plotting)</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../qc.html">act.qc (act.qc)</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="act.qc.arm.add_dqr_to_qc.html">act.qc.arm.add_dqr_to_qc</a></li>
<li class="toctree-l3"><a class="reference internal" href="act.qc.clean.CleanDataset.html">act.qc.clean.CleanDataset</a></li>
<li class="toctree-l3"><a class="reference internal" href="act.qc.qcfilter.QCFilter.html">act.qc.qcfilter.QCFilter</a></li>
<li class="toctree-l3"><a class="reference internal" href="act.qc.qcfilter.parse_bit.html">act.qc.qcfilter.parse_bit</a></li>
<li class="toctree-l3"><a class="reference internal" href="act.qc.qcfilter.set_bit.html">act.qc.qcfilter.set_bit</a></li>
<li class="toctree-l3"><a class="reference internal" href="act.qc.qcfilter.unset_bit.html">act.qc.qcfilter.unset_bit</a></li>
<li class="toctree-l3"><a class="reference internal" href="act.qc.qcfilter.QCFilter.add_delta_test.html">act.qc.qcfilter.QCFilter.add_delta_test</a></li>
<li class="toctree-l3"><a class="reference internal" href="act.qc.qcfilter.QCFilter.add_difference_test.html">act.qc.qcfilter.QCFilter.add_difference_test</a></li>
<li class="toctree-l3"><a class="reference internal" href="act.qc.qcfilter.QCFilter.add_equal_to_test.html">act.qc.qcfilter.QCFilter.add_equal_to_test</a></li>
<li class="toctree-l3"><a class="reference internal" href="act.qc.qcfilter.QCFilter.add_greater_test.html">act.qc.qcfilter.QCFilter.add_greater_test</a></li>
<li class="toctree-l3"><a class="reference internal" href="act.qc.qcfilter.QCFilter.add_greater_equal_test.html">act.qc.qcfilter.QCFilter.add_greater_equal_test</a></li>
<li class="toctree-l3"><a class="reference internal" href="act.qc.qcfilter.QCFilter.add_inside_test.html">act.qc.qcfilter.QCFilter.add_inside_test</a></li>
<li class="toctree-l3"><a class="reference internal" href="act.qc.qcfilter.QCFilter.add_less_test.html">act.qc.qcfilter.QCFilter.add_less_test</a></li>
<li class="toctree-l3"><a class="reference internal" href="act.qc.qcfilter.QCFilter.add_less_equal_test.html">act.qc.qcfilter.QCFilter.add_less_equal_test</a></li>
<li class="toctree-l3"><a class="reference internal" href="act.qc.qcfilter.QCFilter.add_missing_value_test.html">act.qc.qcfilter.QCFilter.add_missing_value_test</a></li>
<li class="toctree-l3"><a class="reference internal" href="act.qc.qcfilter.QCFilter.add_not_equal_to_test.html">act.qc.qcfilter.QCFilter.add_not_equal_to_test</a></li>
<li class="toctree-l3"><a class="reference internal" href="act.qc.qcfilter.QCFilter.add_outside_test.html">act.qc.qcfilter.QCFilter.add_outside_test</a></li>
<li class="toctree-l3"><a class="reference internal" href="act.qc.qcfilter.QCFilter.add_persistence_test.html">act.qc.qcfilter.QCFilter.add_persistence_test</a></li>
<li class="toctree-l3"><a class="reference internal" href="act.qc.qcfilter.QCFilter.add_test.html">act.qc.qcfilter.QCFilter.add_test</a></li>
<li class="toctree-l3"><a class="reference internal" href="act.qc.qcfilter.QCFilter.available_bit.html">act.qc.qcfilter.QCFilter.available_bit</a></li>
<li class="toctree-l3"><a class="reference internal" href="act.qc.qcfilter.QCFilter.check_for_ancillary_qc.html">act.qc.qcfilter.QCFilter.check_for_ancillary_qc</a></li>
<li class="toctree-l3"><a class="reference internal" href="act.qc.qcfilter.QCFilter.compare_time_series_trends.html">act.qc.qcfilter.QCFilter.compare_time_series_trends</a></li>
<li class="toctree-l3"><a class="reference internal" href="act.qc.qcfilter.QCFilter.create_qc_variable.html">act.qc.qcfilter.QCFilter.create_qc_variable</a></li>
<li class="toctree-l3"><a class="reference internal" href="act.qc.qcfilter.QCFilter.get_qc_test_mask.html">act.qc.qcfilter.QCFilter.get_qc_test_mask</a></li>
<li class="toctree-l3"><a class="reference internal" href="act.qc.qcfilter.QCFilter.get_masked_data.html">act.qc.qcfilter.QCFilter.get_masked_data</a></li>
<li class="toctree-l3"><a class="reference internal" href="act.qc.qcfilter.QCFilter.remove_test.html">act.qc.qcfilter.QCFilter.remove_test</a></li>
<li class="toctree-l3"><a class="reference internal" href="act.qc.qcfilter.QCFilter.set_test.html">act.qc.qcfilter.QCFilter.set_test</a></li>
<li class="toctree-l3"><a class="reference internal" href="act.qc.qcfilter.QCFilter.unset_test.html">act.qc.qcfilter.QCFilter.unset_test</a></li>
<li class="toctree-l3"><a class="reference internal" href="act.qc.qcfilter.QCFilter.update_ancillary_variable.html">act.qc.qcfilter.QCFilter.update_ancillary_variable</a></li>
<li class="toctree-l3"><a class="reference internal" href="act.qc.qctests.QCTests.html">act.qc.qctests.QCTests</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">act.qc.radiometer_tests.fft_shading_test</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../retrievals.html">act.retrievals (act.retrievals)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../utils.html">act.utils (act.utils)</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Downloads</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://anaconda.org/conda-forge/act-atmos/files">Anaconda Cloud</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/ARM-DOE/ACT">GitHub Repository</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/ARM-DOE/ACT/archive/master.zip">Zip File of Repository</a></li>
</ul>
<p class="caption"><span class="caption-text">Getting Help</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://github.com/ARM-DOE/ACT/issues">GitHub Issue Tracker</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Atmospheric data Community Toolkit</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../index.html">API Reference</a> &raquo;</li>
        
          <li><a href="../qc.html">act.qc (act.qc)</a> &raquo;</li>
        
      <li>act.qc.radiometer_tests.fft_shading_test</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../_sources/API/generated/act.qc.radiometer_tests.fft_shading_test.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="act-qc-radiometer-tests-fft-shading-test">
<h1>act.qc.radiometer_tests.fft_shading_test<a class="headerlink" href="#act-qc-radiometer-tests-fft-shading-test" title="Permalink to this headline">¶</a></h1>
<dl class="py function">
<dt id="act.qc.radiometer_tests.fft_shading_test">
<code class="sig-prename descclassname"><span class="pre">act.qc.radiometer_tests.</span></code><code class="sig-name descname"><span class="pre">fft_shading_test</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">variable</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'diffuse_hemisp_narrowband_filter4'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fft_window</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">30</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shad_freq_lower</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[0.008,</span> <span class="pre">0.017]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shad_freq_upper</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[0.0105,</span> <span class="pre">0.0195]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ratio_thresh</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[3.15,</span> <span class="pre">1.2]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">time_interval</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">smooth_window</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shading_thresh</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.4</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/act/qc/radiometer_tests.html#fft_shading_test"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#act.qc.radiometer_tests.fft_shading_test" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to test shadowband radiometer (MFRSR, RSS, etc) instruments
for shading related problems.  Program was adapted by Adam Theisen
from the method defined in Alexandrov et al 2007 to process on a
point by point basis using a window of data around that point for
the FFT analysis.</p>
<p>For ARM data, testing has found that this works the best on narrowband
filter4 for MFRSR data.</p>
<p>Function has been tested and is in use by the ARM DQ Office for
problem detection.  It is know to have some false positives at times.</p>
<p>Need to run obj.clean.cleanup() ahead of time to ensure proper addition
to QC variable</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>obj</strong> (<em>xarray Dataset</em>) – Data object</p></li>
<li><p><strong>variable</strong> (<em>string</em>) – Name of variable to process</p></li>
<li><p><strong>fft_window</strong> (<em>int</em>) – Number of samples to use in the FFT window.  Default is +- 30 samples
Note: this is +- so the full window will be double</p></li>
<li><p><strong>shad_freq_lower</strong> (<em>list</em>) – Lower frequency over which to look for peaks in FFT</p></li>
<li><p><strong>shad_freq_upper</strong> (<em>list</em>) – Upper frequency over which to look for peaks in FFT</p></li>
<li><p><strong>ratio_thresh</strong> (<em>list</em>) – Threshold for each freq window to flag data.  I.e. if the peak is 3.15 times
greater than the surrounding area</p></li>
<li><p><strong>time_interval</strong> (<em>float</em>) – Sampling rate of the instrument</p></li>
<li><p><strong>smooth_window</strong> (<em>int</em>) – Number of samples to use in smoothing FFTs before analysis</p></li>
<li><p><strong>shading_thresh</strong> (<em>float</em>) – After smoothing, the value over which is considered a shading signal</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>obj</strong> – Data object</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>xarray Dataset</p>
</dd>
</dl>
<p class="rubric">References</p>
<p>Alexandrov, Mikhail &amp; Kiedron, Peter &amp; Michalsky, Joseph &amp; Hodges, Gary
&amp; Flynn, Connor &amp; Lacis, Andrew. (2007). Optical depth measurements by
shadow-band radiometers and their uncertainties. Applied optics. 46.
8027-38. 10.1364/AO.46.008027.</p>
</dd></dl>

</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="../retrievals.html" class="btn btn-neutral float-right" title="act.retrievals (act.retrievals)" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="act.qc.qctests.QCTests.html" class="btn btn-neutral float-left" title="act.qc.qctests.QCTests" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2018, Adam Theisen.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>