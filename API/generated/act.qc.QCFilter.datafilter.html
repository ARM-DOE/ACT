<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>act.qc.QCFilter.datafilter &mdash; Atmospheric data Community Toolkit 0.post1+g188ceb7 documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/plot_directive.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/copybutton.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/sg_gallery.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/sg_gallery-binder.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/sg_gallery-dataframe.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/sg_gallery-rendered-html.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/clipboard.min.js"></script>
        <script src="../../_static/copybutton.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="act.qc.QCFilter.get_masked_data" href="act.qc.QCFilter.get_masked_data.html" />
    <link rel="prev" title="act.qc.QCFilter.create_qc_variable" href="act.qc.QCFilter.create_qc_variable.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../index.html" class="icon icon-home"> Atmospheric data Community Toolkit
          </a>
              <div class="version">
                0.post1+g188ceb7
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Documentation</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../CREATING_ENVIRONMENTS.html">Setting up an Environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../CONTRIBUTING.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../usage.html">Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../source/auto_examples/index.html">ACT Example Gallery</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">API Reference Manual</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="act.corrections.html">act.corrections</a></li>
<li class="toctree-l2"><a class="reference internal" href="act.discovery.html">act.discovery</a></li>
<li class="toctree-l2"><a class="reference internal" href="act.io.html">act.io</a></li>
<li class="toctree-l2"><a class="reference internal" href="act.plotting.html">act.plotting</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="act.qc.html">act.qc</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="act.qc.CleanDataset.html">act.qc.CleanDataset</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="act.qc.QCFilter.html">act.qc.QCFilter</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="act.qc.QCFilter.add_delta_test.html">act.qc.QCFilter.add_delta_test</a></li>
<li class="toctree-l4"><a class="reference internal" href="act.qc.QCFilter.add_difference_test.html">act.qc.QCFilter.add_difference_test</a></li>
<li class="toctree-l4"><a class="reference internal" href="act.qc.QCFilter.add_equal_to_test.html">act.qc.QCFilter.add_equal_to_test</a></li>
<li class="toctree-l4"><a class="reference internal" href="act.qc.QCFilter.add_gesd_test.html">act.qc.QCFilter.add_gesd_test</a></li>
<li class="toctree-l4"><a class="reference internal" href="act.qc.QCFilter.add_greater_equal_test.html">act.qc.QCFilter.add_greater_equal_test</a></li>
<li class="toctree-l4"><a class="reference internal" href="act.qc.QCFilter.add_greater_test.html">act.qc.QCFilter.add_greater_test</a></li>
<li class="toctree-l4"><a class="reference internal" href="act.qc.QCFilter.add_inside_test.html">act.qc.QCFilter.add_inside_test</a></li>
<li class="toctree-l4"><a class="reference internal" href="act.qc.QCFilter.add_iqr_test.html">act.qc.QCFilter.add_iqr_test</a></li>
<li class="toctree-l4"><a class="reference internal" href="act.qc.QCFilter.add_less_equal_test.html">act.qc.QCFilter.add_less_equal_test</a></li>
<li class="toctree-l4"><a class="reference internal" href="act.qc.QCFilter.add_less_test.html">act.qc.QCFilter.add_less_test</a></li>
<li class="toctree-l4"><a class="reference internal" href="act.qc.QCFilter.add_missing_value_test.html">act.qc.QCFilter.add_missing_value_test</a></li>
<li class="toctree-l4"><a class="reference internal" href="act.qc.QCFilter.add_not_equal_to_test.html">act.qc.QCFilter.add_not_equal_to_test</a></li>
<li class="toctree-l4"><a class="reference internal" href="act.qc.QCFilter.add_outside_test.html">act.qc.QCFilter.add_outside_test</a></li>
<li class="toctree-l4"><a class="reference internal" href="act.qc.QCFilter.add_persistence_test.html">act.qc.QCFilter.add_persistence_test</a></li>
<li class="toctree-l4"><a class="reference internal" href="act.qc.QCFilter.add_test.html">act.qc.QCFilter.add_test</a></li>
<li class="toctree-l4"><a class="reference internal" href="act.qc.QCFilter.available_bit.html">act.qc.QCFilter.available_bit</a></li>
<li class="toctree-l4"><a class="reference internal" href="act.qc.QCFilter.check_for_ancillary_qc.html">act.qc.QCFilter.check_for_ancillary_qc</a></li>
<li class="toctree-l4"><a class="reference internal" href="act.qc.QCFilter.compare_time_series_trends.html">act.qc.QCFilter.compare_time_series_trends</a></li>
<li class="toctree-l4"><a class="reference internal" href="act.qc.QCFilter.create_qc_variable.html">act.qc.QCFilter.create_qc_variable</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">act.qc.QCFilter.datafilter</a></li>
<li class="toctree-l4"><a class="reference internal" href="act.qc.QCFilter.get_masked_data.html">act.qc.QCFilter.get_masked_data</a></li>
<li class="toctree-l4"><a class="reference internal" href="act.qc.QCFilter.get_qc_test_mask.html">act.qc.QCFilter.get_qc_test_mask</a></li>
<li class="toctree-l4"><a class="reference internal" href="act.qc.QCFilter.remove_test.html">act.qc.QCFilter.remove_test</a></li>
<li class="toctree-l4"><a class="reference internal" href="act.qc.QCFilter.set_test.html">act.qc.QCFilter.set_test</a></li>
<li class="toctree-l4"><a class="reference internal" href="act.qc.QCFilter.unset_test.html">act.qc.QCFilter.unset_test</a></li>
<li class="toctree-l4"><a class="reference internal" href="act.qc.QCFilter.update_ancillary_variable.html">act.qc.QCFilter.update_ancillary_variable</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="act.qc.QCTests.html">act.qc.QCTests</a></li>
<li class="toctree-l3"><a class="reference internal" href="act.qc.SP2ParticleCriteria.html">act.qc.SP2ParticleCriteria</a></li>
<li class="toctree-l3"><a class="reference internal" href="act.qc.add_dqr_to_qc.html">act.qc.add_dqr_to_qc</a></li>
<li class="toctree-l3"><a class="reference internal" href="act.qc.convert_units.html">act.qc.convert_units</a></li>
<li class="toctree-l3"><a class="reference internal" href="act.qc.determine_time_delta.html">act.qc.determine_time_delta</a></li>
<li class="toctree-l3"><a class="reference internal" href="act.qc.fft_shading_test.html">act.qc.fft_shading_test</a></li>
<li class="toctree-l3"><a class="reference internal" href="act.qc.fft_shading_test_process.html">act.qc.fft_shading_test_process</a></li>
<li class="toctree-l3"><a class="reference internal" href="act.qc.get_missing_value.html">act.qc.get_missing_value</a></li>
<li class="toctree-l3"><a class="reference internal" href="act.qc.get_sunrise_sunset_noon.html">act.qc.get_sunrise_sunset_noon</a></li>
<li class="toctree-l3"><a class="reference internal" href="act.qc.get_waveform_statistics.html">act.qc.get_waveform_statistics</a></li>
<li class="toctree-l3"><a class="reference internal" href="act.qc.is_sun_visible.html">act.qc.is_sun_visible</a></li>
<li class="toctree-l3"><a class="reference internal" href="act.qc.parse_bit.html">act.qc.parse_bit</a></li>
<li class="toctree-l3"><a class="reference internal" href="act.qc.rfft.html">act.qc.rfft</a></li>
<li class="toctree-l3"><a class="reference internal" href="act.qc.rfftfreq.html">act.qc.rfftfreq</a></li>
<li class="toctree-l3"><a class="reference internal" href="act.qc.set_bit.html">act.qc.set_bit</a></li>
<li class="toctree-l3"><a class="reference internal" href="act.qc.unset_bit.html">act.qc.unset_bit</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="act.retrievals.html">act.retrievals</a></li>
<li class="toctree-l2"><a class="reference internal" href="act.utils.html">act.utils</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Downloads</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://anaconda.org/conda-forge/act-atmos/files">Anaconda Cloud</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/ARM-DOE/ACT">GitHub Repository</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/ARM-DOE/ACT/archive/master.zip">Zip File of Repository</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Getting Help</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://github.com/ARM-DOE/ACT/issues">GitHub Issue Tracker</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Atmospheric data Community Toolkit</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../index.html">API Reference Manual</a> &raquo;</li>
          <li><a href="act.qc.html">act.qc</a> &raquo;</li>
          <li><a href="act.qc.QCFilter.html">act.qc.QCFilter</a> &raquo;</li>
      <li>act.qc.QCFilter.datafilter</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/API/generated/act.qc.QCFilter.datafilter.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="act-qc-qcfilter-datafilter">
<h1>act.qc.QCFilter.datafilter<a class="headerlink" href="#act-qc-qcfilter-datafilter" title="Permalink to this headline">¶</a></h1>
<dl class="py method">
<dt class="sig sig-object py" id="act.qc.QCFilter.datafilter">
<span class="sig-prename descclassname"><span class="pre">QCFilter.</span></span><span class="sig-name descname"><span class="pre">datafilter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">variables</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rm_assessments</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rm_tests</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">np_ma</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">del_qc_var</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/act/qc/qcfilter.html#QCFilter.datafilter"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#act.qc.QCFilter.datafilter" title="Permalink to this definition">¶</a></dt>
<dd><p>Method to apply quality control variables to data variables by
changing the data values in the dataset using quality control variables.
The data variable is changed to to a numpy masked array with failing
data masked or, if requested, to numpy array with failing data set to
NaN. This can be used to update the data variable in the xarray
dataset for use with xarray methods to perform analysis on the data
since those methods don’t read the quality control variables.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>variables</strong> (<em>None or str or list of str</em>) – Data variable names to process</p></li>
<li><p><strong>rm_assessments</strong> (<em>str or list of str</em>) – Assessment names listed under quality control varible flag_assessments
to exclude from returned data. Examples include
[‘Bad’, ‘Incorrect’, ‘Indeterminate’, ‘Suspect’]</p></li>
<li><p><strong>rm_tests</strong> (<em>int or list of int</em>) – Test numbers listed under quality control variable to exclude from
returned data. This is the test
number (or bit position number) not the mask number.</p></li>
<li><p><strong>np_ma</strong> (<em>boolean</em>) – Shoudl the data in the xarray DataArray be set to numpy masked
arrays. This should work with most xarray methods. If the xarray
processing method does not work with numpy masked array set to
False to use NaN.</p></li>
<li><p><strong>verbose</strong> (<em>boolean</em>) – Print processing information.</p></li>
<li><p><strong>del_qc_var</strong> (<em>boolean</em>) – Opttion to delete quality control variable after processing. Since
the data values can not be determined after they are set to NaN
and xarray method processing would also process the quality control
variables, the default is to remove the quality control data
variables. If numpy masked arrays are used the data are not lost
but would need to be extracted and set to DataArray to return the
dataset back to original state.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">act.io.armfiles</span> <span class="kn">import</span> <span class="n">read_netcdf</span>
<span class="kn">from</span> <span class="nn">act.tests</span> <span class="kn">import</span> <span class="n">EXAMPLE_MET1</span>

<span class="n">ds</span> <span class="o">=</span> <span class="n">read_netcdf</span><span class="p">(</span><span class="n">EXAMPLE_MET1</span><span class="p">)</span>
<span class="n">ds</span><span class="o">.</span><span class="n">clean</span><span class="o">.</span><span class="n">cleanup</span><span class="p">()</span>

<span class="n">var_name</span> <span class="o">=</span> <span class="s2">&quot;atmos_pressure&quot;</span>

<span class="n">ds_1</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>

<span class="n">ds</span><span class="o">.</span><span class="n">qcfilter</span><span class="o">.</span><span class="n">add_less_test</span><span class="p">(</span><span class="n">var_name</span><span class="p">,</span> <span class="mi">99</span><span class="p">,</span> <span class="n">test_assessment</span><span class="o">=</span><span class="s2">&quot;Bad&quot;</span><span class="p">)</span>
<span class="n">ds</span><span class="o">.</span><span class="n">qcfilter</span><span class="o">.</span><span class="n">datafilter</span><span class="p">(</span><span class="n">rm_assessments</span><span class="o">=</span><span class="s2">&quot;Bad&quot;</span><span class="p">)</span>
<span class="n">ds_2</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;All_data=&quot;</span><span class="p">,</span> <span class="n">ds_1</span><span class="p">[</span><span class="n">var_name</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">)</span>
<span class="n">All_data</span> <span class="o">=</span> <span class="mf">98.86098</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Bad_Removed=&quot;</span><span class="p">,</span> <span class="n">ds_2</span><span class="p">[</span><span class="n">var_name</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">)</span>
<span class="n">Bad_Removed</span> <span class="o">=</span> <span class="mf">99.15148</span>
</pre></div>
</div>
</dd></dl>

</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="act.qc.QCFilter.create_qc_variable.html" class="btn btn-neutral float-left" title="act.qc.QCFilter.create_qc_variable" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="act.qc.QCFilter.get_masked_data.html" class="btn btn-neutral float-right" title="act.qc.QCFilter.get_masked_data" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2018, ACT Developers.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
    <!-- Theme Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-8YN80YZDD8"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-8YN80YZDD8', {
          'anonymize_ip': false,
      });
    </script> 

</body>
</html>